---
import Layout from '@/layouts/Layout.astro';
import { Hero } from '@/components/Hero';
import { Badge } from "@/components/ui/badge";
import { calculateYearsOfExperience } from '@/lib/utils';
import { getCollection } from 'astro:content';

const experience = calculateYearsOfExperience("2021-08-02");
const expYears = experience.toFixed(1);

const features = [
  { title: "JavaScript", details: `${expYears}+ years crafting front-end experiences, from vanilla JS to modern frameworks.`, icon: "JS", badge: `${expYears}y exp`, size: "large" },
  { title: "React", details: `Building dynamic, component-driven UIs with React and its ecosystem.`, icon: "⚛", badge: `${expYears}y exp`, size: "small" },
  { title: "Next.js", details: `Full-stack apps with SSR, ISR, and the App Router.`, icon: "▲", badge: `${expYears}y exp`, size: "small" },
  { title: "Self-management", details: "Thrives on challenges, turning them into achievements with minimal guidance. Proactive and deadline-driven.", icon: "◎", size: "small" },
  { title: "Curious", details: "Constantly exploring new technology frontiers — from Linux internals to cloud architectures.", icon: "⟐", size: "small" },
  { title: "Free Software", details: "Advocates for open-source software, contributing to community-driven innovation and transparency.", icon: "◇", badge: "OSS", size: "large" }
];

const latestPosts = (await getCollection('blog'))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 3);
---

<Layout title="Lenin AGC | Full Stack Developer">
	<Hero 
		client:load
		name="Lenin AGC" 
		title="Full Stack Web Dev" 
		tagline="Passionate JavaScript enthusiast from Colombia who loves to create and deliver high-quality products."
		experience={experience}
	/>

	<!-- LiveKit-style glowing divider -->
	<div class="relative w-full h-px">
		<div class="absolute inset-0 bg-gradient-to-r from-transparent via-livekit-cyan/60 to-transparent"></div>
		<div class="absolute inset-0 bg-gradient-to-r from-transparent via-livekit-cyan/30 to-transparent blur-sm"></div>
		<div class="absolute -top-4 left-1/2 -translate-x-1/2 w-1/2 h-8 bg-livekit-cyan/8 blur-xl pointer-events-none"></div>
	</div>

	<div class="container space-y-32 pb-20 pt-16">
		<!-- Features/Skills Section — Bento Grid 2026 -->
		<section class="space-y-16 relative py-20">
			<div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[80%] h-[80%] bg-livekit-blue/5 blur-[120px] -z-10 pointer-events-none rounded-full"></div>
			<div class="space-y-4">
				<h2 class="text-4xl md:text-5xl font-bold tracking-tighter text-livekit-cyan">Expertise & Passion</h2>
				<p class="text-xl text-muted-foreground max-w-2xl font-light">
					Focused on modern web technologies and building scalable, user-centric applications.
				</p>
			</div>
			
			<!-- Bento Grid -->
			<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-5">
				{features.map((feature, i) => (
					<div
						class:list={[
							"bento-card group relative rounded-2xl backdrop-blur-md overflow-hidden transition-all duration-500",
							feature.size === "large" ? "sm:col-span-2 lg:col-span-2" : "",
						]}
					>
						{/* Top glow line on hover */}
						<div class="absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-livekit-cyan/0 to-transparent group-hover:via-livekit-cyan/60 transition-all duration-700"></div>

						<div class:list={[
							"p-6 md:p-8 flex flex-col justify-between h-full",
							feature.size === "large" ? "min-h-[180px]" : "min-h-[200px]",
						]}>
							{/* Header row: icon + badge */}
							<div class="flex items-start justify-between mb-6">
								<div class="flex items-center justify-center w-11 h-11 rounded-xl bg-livekit-cyan/10 border border-livekit-cyan/20 text-livekit-cyan text-lg font-bold group-hover:bg-livekit-cyan/20 group-hover:border-livekit-cyan/40 transition-all duration-500">
									{feature.icon}
								</div>
								{feature.badge && (
									<Badge variant="outline" class="border-border text-muted-foreground text-[10px] uppercase tracking-widest px-2.5 py-0.5 group-hover:border-livekit-cyan/30 group-hover:text-livekit-cyan transition-all duration-500">
										{feature.badge}
									</Badge>
								)}
							</div>

							{/* Content */}
							<div class="space-y-2 mt-auto">
								<h3 class="text-xl font-bold tracking-tight text-foreground group-hover:text-livekit-cyan transition-colors duration-300">
									{feature.title}
								</h3>
								<p class="text-sm text-muted-foreground leading-relaxed font-light">
									{feature.details}
								</p>
							</div>
						</div>
					</div>
				))}
			</div>
		</section>

		<!-- Latest from the Blog -->
		<section class="space-y-10 relative">
			<div class="flex items-end justify-between gap-4">
				<div class="space-y-3">
					<h2 class="text-4xl md:text-5xl font-bold tracking-tighter text-livekit-cyan">Latest posts</h2>
					<p class="text-lg text-muted-foreground font-light">
						Thoughts on Linux, development, and open source.
					</p>
				</div>
				<a 
					href="/blog" 
					class="hidden sm:inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-livekit-cyan transition-colors duration-300 shrink-0"
				>
					View all
					<span class="text-lg">→</span>
				</a>
			</div>

			<div class="grid gap-4 md:gap-5 sm:grid-cols-2 lg:grid-cols-3">
				{latestPosts.map((post, i) => (
					<a 
						href={`/blog/${post.id}`} 
						class:list={[
							"bento-card group relative rounded-2xl backdrop-blur-md overflow-hidden transition-all duration-500",
							i === 0 ? "sm:col-span-2 lg:col-span-2" : "",
						]}
					>
						{/* Top glow line on hover */}
						<div class="absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-livekit-cyan/0 to-transparent group-hover:via-livekit-cyan/60 transition-all duration-700"></div>

						<div class:list={[
							"p-6 md:p-8 flex flex-col justify-between h-full",
							i === 0 ? "min-h-[180px]" : "min-h-[200px]",
						]}>
							<div class="flex items-start justify-between mb-6">
								<Badge variant="outline" class="border-border text-muted-foreground text-[10px] uppercase tracking-widest px-2.5 py-0.5 group-hover:border-livekit-cyan/30 group-hover:text-livekit-cyan transition-all duration-500">
									{post.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}
								</Badge>
								<span class="text-muted-foreground/50 text-lg group-hover:text-livekit-cyan/70 group-hover:translate-x-1 transition-all duration-300">→</span>
							</div>

							<div class="space-y-2 mt-auto">
								<h3 class="text-xl font-bold tracking-tight text-foreground group-hover:text-livekit-cyan transition-colors duration-300 line-clamp-2">
									{post.data.title}
								</h3>
								<div class="flex flex-wrap gap-2">
									{post.data.tags?.slice(0, 3).map(tag => (
										<span class="text-[10px] uppercase tracking-wider text-muted-foreground/60">#{tag}</span>
									))}
								</div>
							</div>
						</div>
					</a>
				))}
			</div>

			<a 
				href="/blog" 
				class="sm:hidden inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-livekit-cyan transition-colors duration-300"
			>
				View all posts
				<span class="text-lg">→</span>
			</a>
		</section>
	</div>
</Layout>
